# Claude Code 開発ガイドライン

Claude Codeを使った効率的な開発のためのルールとベストプラクティス。

## 💬 コミュニケーション設定

### 基本言語

- **会話言語**: 日本語で対話
- **コメント**: 日本語でコメント記述
- **変数名**: 英語（国際標準）

### Git コミット規約

- **言語**: 日本語でコミットメッセージ作成
- **プリフィックス**: `feat:`, `fix:`, `docs:`, `refactor:`, `test:`, `chore:`を使用
- **形式**: `プリフィックス: 簡潔な説明`

```bash
# 例
git commit -m "feat: ユーザー認証機能を追加"
git commit -m "fix: ログイン時のバリデーションエラーを修正"
git commit -m "docs: READMEにセットアップ手順を追加"
```

### プリフィックス一覧

- `feat:` 新機能追加
- `fix:` バグ修正  
- `docs:` ドキュメント更新
- `style:` コードフォーマット（機能変更なし）
- `refactor:` リファクタリング
- `test:` テスト追加・修正
- `chore:` ビルド・設定変更

## 🐍 Python開発

### パッケージ管理（Rye使用）

- **インストール**: `rye add パッケージ名`
- **ツール実行**: `rye run ツール名`
- **同期**: `rye sync`
- **禁止**: `pip install`、直接のpipコマンド使用禁止

### コード品質

- 型ヒント必須
- パブリックAPIにはdocstring必須
- 関数は小さく、単一責任で
- 既存パターンに従う
- 行数制限: 88文字

### テスト

```bash
# pytest実行
rye run pytest

# 非同期テスト
# anyio使用（asyncioは不可）
```

### コードフォーマット

```bash
# Ruff フォーマット
rye run ruff format .

# Ruff チェック
rye run ruff check .

# Ruff 自動修正
rye run ruff check . --fix
```

### 型チェック

```bash
rye run pyright
```

### エラー解決順序

1. **フォーマット** → **型エラー** → **リンティング**
2. **型エラー対処**: Optional型にNullチェック追加
3. **行長エラー**: 括弧で文字列分割、関数呼び出しを複数行に

## 🚀 開発効率化

### ツール活用

- **一括編集**: MultiEditで複数箇所を効率的に変更
- **検索**: Grepで大規模コードベースから素早く発見
- **パターンマッチング**: Globで特定ファイルを検索
- **段階的開発**: TodoWriteでタスク分割と進捗可視化

### コードレビュー観点

1. **可読性**: 他の開発者が理解しやすいか
2. **保守性**: 将来の変更に対応しやすいか  
3. **性能**: ボトルネックになる可能性はないか
4. **セキュリティ**: 脆弱性の混入はないか
5. **テスト**: 十分なテストカバレッジがあるか

### プロジェクト管理

- **設定統一**: CLAUDE.mdでプロジェクト固有のルールを文書化
- **自動化**: Makefileやスクリプトで反復作業を削減
- **依存関係**: package.json、Cargo.toml、pyproject.toml等で明確に管理
